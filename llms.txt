# Fellesfunksjoner i R for SSB (`fellesr`)

Her finner du en rekke funksjoner laget for å løse problemstillinger som
er vanlige i SSB. Pakken kan installeres i et renv-miljø i Jupyterlab
(på DAPLA og i prodsonen) og i RStudio Server (prodsonen). Følgende kode
vil sette opp et `renv`-miljø og installere `fellesr`-pakken. Dette skal
kun gjøres én gang per prosjekt. Les mer om hvordan å opprette et
virtuelt miljø med `renv` i
[Dapla-manualen](https://manual.dapla.ssb.no/jobbe-med-kode.html#r-og-renv)

    renv::init()
    renv::install("statisticsnorway/ssb-fellesr")

For å ta i bruk funksjoner i `fellesr` må du kalle biblioteket med

    library(fellesr)

Se under «Articles» på **[fellesr
nettsiden](https://statisticsnorway.github.io/ssb-fellesr/)** eller
finner du en oppsummering nedenfor med linker for å velge emner.

Pakken `fellesr` inneholder følgende funksjoner:

#### Produksjonssonen

- [Uttrekk fra Dynarev i
  R](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette_dynarev_uttrekk.html)
  (`dynarev_uttrekk`)
- [Laste opp data til
  Statistikkbanken](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette_statbank_lasting.html)
  (`statbank_lasting`)
- [Kjøre shiny og
  esquisse](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette_shiny_ssb.html)
  (`runApp_ssb`, `runExample_ssb`, `esquisser_ssb`)

#### DAPLA

- [Lese inn og skrive filer på
  DAPLA](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette__DAPLA_jukseark.html)
  (`read_SSB`, `write_SSB`, `gcs_bucket`, `list.files`)
- [Laste opp data til
  Statistikkbanken](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette_statbank_lasting.html)
  (`statbank_lasting`)
- [Kjøre shiny og
  esquisse](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette_shiny_ssb.html)
  (`runApp_ssb`, `runExample_ssb`, `esquisser_ssb`)

#### Visualisering

- [SSB theme for
  ggplot](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette_SSB_theme.html)
- [SSB fargepallet fra
  KLASS](https://statisticsnorway.github.io/ssb-fellesr/articles/vignette_SSB_fargepalett.html)

### Andre pakker laget for bruk i SSB

I tillegg til `fellesr` har det blitt laget flere pakker for bruk i SSB.
Under følger en foreløpig oversikt. Dersom du har laget en funksjon
eller en pakke og ønsker å få lagt den til i `fellesr` eller i listen
under er det bare å ta kontakt.

- [PxWebApiData](https://cran.r-project.org/web/packages/PxWebApiData/vignettes/Introduction.html) -
  Statistikkbankens API
- [klassR](https://statisticsnorway.github.io/ssb-klassr/articles/klassR-vignette.html) -
  KLASS API
- [SSBtools](https://github.com/statisticsnorway/ssb-ssbtools)
- [SmallCountRounding](https://cran.r-project.org/web/packages/SmallCountRounding/vignettes/Introduction_to_SmallCountRounding.html)
- [GaussSuppression](https://cran.r-project.org/web/packages/GaussSuppression/vignettes/define_tables.html)
- [GISSB](https://statisticsnorway.github.io/GISSB/articles/GISSB_vignette.html) -
  Nettverksanalyse i R
- [Kostra](https://github.com/statisticsnorway/ssb-kostra/)
- [struktuR](https://github.com/statisticsnorway/struktuR)
- [SSBpris](https://github.com/statisticsnorway/SSBpris)
- [SdcForetakPerson](https://github.com/statisticsnorway/SdcForetakPerson)
- [SSBcellKey](https://github.com/statisticsnorway/SSBcellKey)
- [easySdcTable](https://cran.r-project.org/web/packages/easySdcTable/index.html)
- [CalibrateSSB](https://github.com/statisticsnorway/sssb-calibrateSSB)
- [RegSDC](https://cran.r-project.org/web/packages/RegSDC/index.html)

### Kursmateriell, veiledning og tips

- [kurs-r-nybegynner-jupyter](https://github.com/statisticsnorway/kurs-r-nybegynner-jupyter)
- [kurs-r-viderekomne](kurs-r-viderekomne)
- [Metodebiblioteket](https://statisticsnorway.github.io/ssb-metodebiblioteket/catalogue_edit.html)
- [R
  grunnkurs](https://github.com/statisticsnorway/kurs-r-grunnkurs-dapla)
- [R for
  viderekomne](https://github.com/statisticsnorway/kurs-r-viderekomne)
- [R i
  produksjon](https://github.com/statisticsnorway/kurs-r-produksjon/tree/main)
- [Bruk av renv for pakke
  installering](https://manual.dapla.ssb.no/statistikkere/jobbe-med-kode.html#r-og-renv)
- [Hvordan å bygge en
  tilleggspakke](https://statisticsnorway.github.io/ssb-fellesr/articles/web_only/bygge-en-r-tilleggspakke.html)
- [Generelle veiledning til R programmering i
  SSB](https://wiki.ssb.no/display/s880/Veiledning+til+R+programmering+i+SSB)
- [databehandling med dplyr
  jukseark](https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf)
- [Kjøre R fra
  SAS](https://statisticsnorway.github.io/ssb-fellesr/articles/web_only/kjre-r-p-sl-stata-p3-fra-sas.html)

### Eksempler på produksjonsløp i R

- [Spesialisthelsetjenesten -
  Personell](https://github.com/statisticsnorway/spesh-personell/tree/master/Personelltabeller)
- [Verdsettelsesmodell-fritidsbolig](https://github.com/statisticsnorway/Verdsettelsesmodell-fritidsbolig)

# Package index

## All functions

- [`dynarev_uttrekk()`](dynarev_uttrekk.md) : Uttrekk fra Dynarev til R

- [`env_check()`](env_check.md) : Funksjon for aa sjekke hvilket miljoe
  man er i

- [`esquisser_ssb()`](esquisser_ssb.md) : Wrapper function for running
  esquisse in Jupyter at SSB

- [`find_project_root()`](find_project_root.md) : Find the Project Root
  Directory

- [`finn_release()`](finn_release.md) : Finn en release fra logg basert
  på ulike kriterier

- [`finn_versjon()`](finn_versjon.md) : Finn versjonsnummer fra et
  filnavn

- [`gcs.list.files()`](gcs.list.files.md) : Funksjon for aa sjekke
  hvilke filer som finnes i en mappe i en Google Cloud Storage bucket

- [`gcs_bucket()`](gcs_bucket.md) : Funksjon for aa koble til Google
  Cloud Storage bucket med arrow

- [`gcs_delete_object()`](gcs_delete_object.md) : Funksjon for aa slette
  fil fra en Google Cloud Storage bucket

- [`gcs_global_bucket()`](gcs_global_bucket.md) : Funksjon for aa koble
  til Google Cloud Storage bucket med googleCloudStorageR

- [`gcs_list_objects()`](gcs_list_objects.md) : Funksjon for aa sjekke
  hvilke filer som finnes i en Google Cloud Storage bucket

- [`get_format()`](get_format.md) : Laster et SSB-format objekt fra JSON

- [`initialer_funk()`](initialer_funk.md) : Funksjon for aa hente
  initialene til paalogget bruker

- [`lag_versjonert_filsti()`](lag_versjonert_filsti.md) : Lag versjonert
  filsti

- [`logg_kjoring()`](logg_kjoring.md) : Lag logg for versjonering

- [`open_dataset()`](open_dataset.md) : Funksjon for aa laste inn
  "multifile" datasett fra Google Cloud Storage bucket

- [`opprett_mappestruktur()`](opprett_mappestruktur.md) : Opprett
  mappestruktur

- [`read_SSB()`](read_SSB.md) : Funksjon for aa laste inn filer fra
  Google Cloud Storage bucket

- [`read_csv()`](read_csv.md) : Funksjon for aa laste inn .csv-fil fra
  Google Cloud Storage bucket

- [`read_feather()`](read_feather.md) : Funksjon for aa laste inn
  .feather-fil fra Google Cloud Storage bucket

- [`read_json()`](read_json.md) : Funksjon for aa laste inn .json-fil
  fra Google Cloud Storage

- [`read_parquet()`](read_parquet.md) : Funksjon for aa laste inn
  .parquet-fil fra Google Cloud Storage bucket

- [`read_parquet_sf()`](read_parquet_sf.md) : Funksjon for aa laste inn
  .parquet-fil (i sf-format) fra Google Cloud Storage bucket

- [`read_rds()`](read_rds.md) : Funksjon for aa laste inn .rds-fil fra
  Google Cloud Storage bucket

- [`read_sf_dataset()`](read_sf_dataset.md) :

  Read an Arrow multi-file dataset and create `sf` object

- [`read_xml()`](read_xml.md) : Funksjon for aa laste inn .xml-fil fra
  Google Cloud Storage bucket

- [`runApp_ssb()`](runApp_ssb.md) : Wrapper function for running shiny
  apps in Jupyter at SSB

- [`runExample_ssb()`](runExample_ssb.md) : Wrapper function for running
  exampleshiny apps in Jupyter at SSB

- [`scale_colour_ssb()`](scale_colour_ssb.md) : Create continuous SSB
  colours

- [`scale_fill_ssb()`](scale_fill_ssb.md) : Create discete SSB colours

- [`set_project_root()`](set_project_root.md) : Set Working Directory to
  Project Root

- [`sjekk_endring()`](sjekk_endring.md) : Sjekk for endringer i
  kolonner, datatyper eller verdier mellom siste og nyeste versjon av en
  fil

- [`sjekk_endring_datatype()`](sjekk_endring_datatype.md) : Sjekk for
  endringer i datatyper mellom siste og nyeste versjon av en fil

- [`sjekk_endring_rader_kolonner()`](sjekk_endring_rader_kolonner.md) :
  Sjekk for endringer i rader og kolonner mellom siste og nyeste versjon
  av en fil

- [`sjekk_endring_sum()`](sjekk_endring_sum.md) : Sjekk for endringer i
  sum for numeriske kolonner mellom siste og nyeste versjon av en fil

- [`sjekk_endring_verdier()`](sjekk_endring_verdier.md) : Sjekk for
  endringer i verdier mellom siste og nyeste versjon av en fil

- [`ssb_colours()`](ssb_colours.md) : Get SSB colours from KLASS

- [`ssb_format`](ssb_format.md) : SSB-format

- [`ssb_palettes()`](ssb_palettes.md) : Create SSB palette

- [`st_read_feather()`](st_read_feather.md) :

  Read a Feather file to `sf` object

- [`st_read_parquet()`](st_read_parquet.md) :

  Read a Parquet file to `sf` object

- [`st_write_feather()`](st_write_feather.md) :

  Write `sf` object to Feather file

- [`st_write_parquet()`](st_write_parquet.md) :

  Write `sf` object to Parquet file

- [`statbank_lasting()`](statbank_lasting.md) : Funksjon for aa laste
  opp data fra Jupyterlab til Statistikkbanken

- [`statbank_uttaksbeskrivelse()`](statbank_uttaksbeskrivelse.md) :
  Funksjon for aa hente uttaksbeskrivelsen til en statistikkbanktabell

- [`theme_ssb()`](theme_ssb.md) : SSB theme for ggplot

- [`versjoner_filer()`](versjoner_filer.md) : Versjonere filer

- [`write_SSB()`](write_SSB.md) : Funksjon for aa skrive filer til
  Google Cloud Storage bucket

- [`write_csv()`](write_csv.md) : Funksjon for aa lagre .csv-fil til
  Google Cloud Storage bucket

- [`write_dataset()`](write_dataset.md) : Funksjon for aa lagre
  "partitioned" .parquet-fil til Google Cloud Storage bucket

- [`write_feather()`](write_feather.md) : Funksjon for aa lagre
  .feather-fil til Google Cloud Storage bucket

- [`write_parquet()`](write_parquet.md) : Funksjon for aa lagre
  .parquet-fil til Google Cloud Storage bucket

- [`write_rds()`](write_rds.md) : Funksjon for aa lagre .rds-fil til
  Google Cloud Storage bucket

- [`write_sas_prog()`](write_sas_prog.md) : Eksporter data frame til
  tekstfil og lag SAS-program for innlesning

- [`write_sf_dataset()`](write_sf_dataset.md) :

  Write `sf` object to an Arrow multi-file dataset

- [`write_sf_parquet()`](write_sf_parquet.md) : Funksjon for aa lagre
  sf-objekt som .parquet-fil til Google Cloud Storage bucket

# Articles

### All vignettes

- [Hvordan å bygge en R-pakke](web_only/bygge-en-r-tilleggspakke.md):

- [Kjøre R på sl-stata-p4 fra
  SAS](web_only/kjre-r-p-sl-stata-p3-fra-sas.md):

  Her er et eksempel på hvordan man kan kjøre et R script på en annen
  server fra SAS

- [DAPLA jukseark](vignette__DAPLA_jukseark.md):

- [Uttrekk fra Dynarev til R](vignette_dynarev_uttrekk.md):

- [Kjøre shiny og Esquisse i Jupyter](vignette_shiny_ssb.md):

- [SSB fargepallet fra KLASS](vignette_SSB_fargepalett.md):

- [SSB format](vignette_ssb_format.md):

- [SSB mal for R-pakker](vignette_SSB_pakke.md):

- [SSB ggplot theme](vignette_SSB_theme.md):

- [Lasting til statistikkbanken](vignette_statbank_lasting.md):
